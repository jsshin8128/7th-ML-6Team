# 모델 평가 지표 변동 기준

## 모델 평가 지표가 변동되는 기준

모델 평가 지표는 다음 상황에서 변동됩니다:

### 1. 모델 파일 변경
- 모델을 재학습하면 (`scripts/train_models.py` 실행)
- 새로운 모델 파일이 저장되면
- 다음 API 호출 시 새로운 모델로 평가됨

### 2. 데이터베이스 데이터 변경
- 새로운 관광지 방문자 데이터가 추가되면
- `load_tourist_data()` 함수가 새로운 데이터를 로드
- 데이터 분포가 변경되면 평가 지표도 변동

### 3. API 호출 시점
- `/api/evaluate-all` 또는 `/api/evaluate/{tourist_code}` 호출 시마다
- 실시간으로 데이터를 로드하고 평가 수행
- **주의**: `random_state=42`로 고정되어 있어 같은 데이터와 모델이면 같은 결과

### 4. 평가 함수 실행 과정
```python
# scripts/evaluate_models.py의 evaluate_model() 함수
1. 데이터 로드 (load_tourist_data)
2. 데이터 분할 (train_test_split, random_state=42 고정)
3. 모델 로드 (joblib.load)
4. 예측 수행
5. 지표 계산 (R², MAE, RMSE, MAPE)
```

### 5. 변동되지 않는 경우
- 같은 모델 파일
- 같은 데이터베이스 상태
- 같은 `random_state` 값
→ **동일한 평가 결과**

## R² 점수 기준 해석

### 일반적인 R² 점수 해석 기준

R² 점수는 **0~1 사이의 값**이며, **1에 가까울수록 좋은 모델**입니다.

| R² 범위 | 해석 | 설명 |
|---------|------|------|
| **0.9 ~ 1.0** | 매우 우수 | 모델이 분산의 90% 이상을 설명 |
| **0.7 ~ 0.9** | 우수 | 모델이 분산의 70~90%를 설명 |
| **0.5 ~ 0.7** | 양호 | 모델이 분산의 50~70%를 설명 |
| **0.3 ~ 0.5** | 보통 | 모델이 분산의 30~50%를 설명 |
| **0.0 ~ 0.3** | 불량 | 모델이 분산의 30% 미만만 설명 |
| **< 0.0** | 매우 불량 | 모델이 평균보다 못함 |

### 현재 시스템의 성능 등급 기준

```python
# backend/main.py의 calculate_performance_level()
- R² < 0.3: "poor" (불량)
- 0.3 ≤ R² < 0.5: "fair" (보통)
- 0.5 ≤ R² < 0.7: "good" (양호)
- 0.7 ≤ R² < 0.9: "excellent" (우수)
- R² ≥ 0.9: "excellent" (우수)
```

### 주의사항

1. **도메인 의존적**: R² 기준은 도메인과 데이터 특성에 따라 달라질 수 있습니다.
   - 예: 사회과학 데이터는 R² = 0.3도 의미 있을 수 있음
   - 예: 물리학 실험 데이터는 R² = 0.9 이상이 일반적

2. **데이터 특성 고려**: 
   - 노이즈가 많은 데이터는 낮은 R²가 정상일 수 있음
   - 복잡한 현상은 낮은 R²가 예상됨

3. **다른 지표와 함께 평가**:
   - R²만으로 판단하지 말고 MAE, RMSE, MAPE도 함께 확인
   - 실제 비즈니스 요구사항과 비교

## 모델 평가 지표 모니터링

### 평가 지표 확인 방법

1. **프론트엔드 대시보드**: 홈 페이지에서 모델 평가 아이콘 클릭
2. **API 직접 호출**: `GET /api/evaluate-all`
3. **스크립트 실행**: `python scripts/evaluate_models.py`

### 지표 변동 추적

- 평가 시점의 `timestamp` 확인
- 모델 파일 수정 시간 확인
- 데이터베이스 업데이트 시간 확인
